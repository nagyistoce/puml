<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>pUML: Canvas Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">pUML</div>
   <div id="projectbrief">pUML--phunctionalUMLeditor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Canvas Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Canvas" -->
<p><code>#include &lt;<a class="el" href="canvas_8h_source.html">canvas.h</a>&gt;</code></p>

<p><a href="classCanvas-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27">ShapeType</a> { <br/>
&#160;&#160;<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27ad82d0cda5f51140a36a7aa4c93cc9ad6">ShpOval</a>, 
<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27a33d860fc1c5dd234fb1a5fa9df8efaf5">ShpStickMan</a>, 
<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27a73e2a5cefac6fce3581bc478f9bd4f75">ShpDiamond</a>, 
<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27ac9a622097641baeec0a36698618e4894">ShpClassRectangle</a>, 
<br/>
&#160;&#160;<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27aef54352a1344ccdb964d65a5157a81c8">ShpSquare</a>
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7">DrawingNext</a> { <a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d">Object</a>, 
<a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>, 
<a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a0a27a449b95938b06f94a155842b6d4f">on_actionDelete_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a2fa86758f4fd6a013c5578ef2db0bd70">on_actionCut_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ad31a2c6bf464e5eeb0d655ce1006ae7b">on_actionCopy_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a0c87406505f31a8d86cd4a44b5f3c92b">on_actionPaste_triggered</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a5525075d65b32480dd518d382946e0ea">Canvas</a> (QWidget *parent=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ab2db3175cf429ee9a926aa96962bd210">sizeHint</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ab0d4d4871a182edcf19c5780df3075b9">setNewShape</a> (<a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27">ShapeType</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#aa513204cd16f292e7540ce9d69b2c217">setMode</a> (<a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7">DrawingNext</a> mode)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a88731365371079103895acfd9c1e4f1e">mouseReleaseEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#abc2200972cf33fd8991d4759955eb0d8">mousePressEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a550abe54072b8baffae3197170b979b8">paintEvent</a> (QPaintEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a9fb4b83a1067ddc2aa04676f51dc5a47">mouseMoveEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#aad2e05730114da14b79fef251f7578e8">contextMenuEvent</a> (QContextMenuEvent *event)</td></tr>
</table>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="a861ada4dfa16993222d5a02ca448d6d7"></a><!-- doxytag: member="Canvas::DrawingNext" ref="a861ada4dfa16993222d5a02ca448d6d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7">Canvas::DrawingNext</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d"></a><!-- doxytag: member="Object" ref="a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d" args="" -->Object</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd"></a><!-- doxytag: member="Connection" ref="a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd" args="" -->Connection</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d"></a><!-- doxytag: member="Nothing" ref="a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d" args="" -->Nothing</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">                     {
        <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d">Object</a>,
        <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>,
        <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>
    };
</pre></div>
</div>
</div>
<a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27"></a><!-- doxytag: member="Canvas::ShapeType" ref="a5ca00bec13c2ec13d78b17c64e7cef27" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27">Canvas::ShapeType</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27ad82d0cda5f51140a36a7aa4c93cc9ad6"></a><!-- doxytag: member="ShpOval" ref="a5ca00bec13c2ec13d78b17c64e7cef27ad82d0cda5f51140a36a7aa4c93cc9ad6" args="" -->ShpOval</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27a33d860fc1c5dd234fb1a5fa9df8efaf5"></a><!-- doxytag: member="ShpStickMan" ref="a5ca00bec13c2ec13d78b17c64e7cef27a33d860fc1c5dd234fb1a5fa9df8efaf5" args="" -->ShpStickMan</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27a73e2a5cefac6fce3581bc478f9bd4f75"></a><!-- doxytag: member="ShpDiamond" ref="a5ca00bec13c2ec13d78b17c64e7cef27a73e2a5cefac6fce3581bc478f9bd4f75" args="" -->ShpDiamond</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27ac9a622097641baeec0a36698618e4894"></a><!-- doxytag: member="ShpClassRectangle" ref="a5ca00bec13c2ec13d78b17c64e7cef27ac9a622097641baeec0a36698618e4894" args="" -->ShpClassRectangle</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a5ca00bec13c2ec13d78b17c64e7cef27aef54352a1344ccdb964d65a5157a81c8"></a><!-- doxytag: member="ShpSquare" ref="a5ca00bec13c2ec13d78b17c64e7cef27aef54352a1344ccdb964d65a5157a81c8" args="" -->ShpSquare</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">                   {
        <a class="code" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27ad82d0cda5f51140a36a7aa4c93cc9ad6">ShpOval</a>,
        <a class="code" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27a33d860fc1c5dd234fb1a5fa9df8efaf5">ShpStickMan</a>,
        <a class="code" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27a73e2a5cefac6fce3581bc478f9bd4f75">ShpDiamond</a>,
        <a class="code" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27ac9a622097641baeec0a36698618e4894">ShpClassRectangle</a>,
        <a class="code" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27aef54352a1344ccdb964d65a5157a81c8">ShpSquare</a>
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5525075d65b32480dd518d382946e0ea"></a><!-- doxytag: member="Canvas::Canvas" ref="a5525075d65b32480dd518d382946e0ea" args="(QWidget *parent=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Canvas::Canvas </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor for the canvas. It sets the sizing policy, sets the background to white, and sets the whatToDrawNext variable to Nothing. </p>
<div class="fragment"><pre class="fragment">                              :
    QWidget(parent)
{
    indexOfSelectedObject = -1;

    <span class="comment">//Set the size policy to say that sizeHint() is a recomended</span>
    <span class="comment">//minimum, but the widget should take up all space available,</span>
    <span class="comment">//and the widget can also be smaller than the sizeHint().</span>
    setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);

    <span class="comment">//Set the background to white. This is done by setting the</span>
    <span class="comment">//background role of a new palette to white, and then setting</span>
    <span class="comment">//that palette to this widget. This way the background color</span>
    <span class="comment">//is painted before the paintevent is called</span>
    setAutoFillBackground(<span class="keyword">true</span>);
    QPalette newPalette(palette());
    newPalette.setColor(QPalette::Window, Qt::white);
    setPalette(newPalette);

    <span class="comment">//Initialize typeOfNewObject</span>
    whatToDrawNext = <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>;

    <span class="comment">//Create the actions</span>
    actionDelete = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
    actionDelete-&gt;setText(<span class="stringliteral">&quot;Delete&quot;</span>);
    actionCut = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
    actionCut-&gt;setText(<span class="stringliteral">&quot;Cut&quot;</span>);
    actionCopy = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
    actionCopy-&gt;setText(<span class="stringliteral">&quot;Copy&quot;</span>);
    actionPaste = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
    actionPaste-&gt;setText(<span class="stringliteral">&quot;Paste&quot;</span>);
    connect(actionDelete, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a0a27a449b95938b06f94a155842b6d4f">on_actionDelete_triggered</a>()));
    connect(actionCut, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a2fa86758f4fd6a013c5578ef2db0bd70">on_actionCut_triggered</a>()));
    connect(actionCopy, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#ad31a2c6bf464e5eeb0d655ce1006ae7b">on_actionCopy_triggered</a>()));
    connect(actionPaste, SIGNAL(triggered()), <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a0c87406505f31a8d86cd4a44b5f3c92b">on_actionPaste_triggered</a>()));

    menuPopup = <span class="keyword">new</span> QMenu(<span class="keyword">this</span>);
    menuPopup-&gt;addAction(actionCut);
    menuPopup-&gt;addAction(actionCopy);
    menuPopup-&gt;addAction(actionPaste);
    menuPopup-&gt;addAction(actionDelete);

    <span class="comment">//setContextMenuPolicy(Qt::CustomContextMenu);</span>


}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aad2e05730114da14b79fef251f7578e8"></a><!-- doxytag: member="Canvas::contextMenuEvent" ref="aad2e05730114da14b79fef251f7578e8" args="(QContextMenuEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called when the widget thinks that a contect menu is needed. E.g., the right mouse button is clicked or the menu keyboard button is pressed. </p>
<div class="fragment"><pre class="fragment">{
    <span class="comment">//popup the menu at the current mouse position</span>
    menuPopup-&gt;exec(event-&gt;globalPos());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9fb4b83a1067ddc2aa04676f51dc5a47"></a><!-- doxytag: member="Canvas::mouseMoveEvent" ref="a9fb4b83a1067ddc2aa04676f51dc5a47" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> ((event-&gt;buttons() = Qt::LeftButton) &amp;&amp;
        (whatToDrawNext == <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>) &amp;&amp;
        (indexOfSelectedObject != -1))
    {
        <span class="comment">//The user is moving the mouse while holding down</span>
        <span class="comment">//the left mouse button, and the canvas is in</span>
        <span class="comment">//selection mode, and there is an object selected,</span>
        <span class="comment">//they must be dragging!</span>
        nodes.at(indexOfSelectedObject)-&gt;setPosition(this-&gt;mapFromGlobal(event-&gt;globalPos()) - positionDelta);
        update();
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc2200972cf33fd8991d4759955eb0d8"></a><!-- doxytag: member="Canvas::mousePressEvent" ref="abc2200972cf33fd8991d4759955eb0d8" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This event occures when the user presses down on the the mouse but hasn't release it yet. Here is where we want to select objects if the canvas is in selection mode. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton) {
        <span class="keywordflow">switch</span> (whatToDrawNext) {
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d">Object</a>:
            <span class="comment">//don&#39;t select or draw anything,</span>
            <span class="comment">//the work is done in the release event</span>
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>:
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>:
            <span class="comment">//find what object the user is</span>
            <span class="comment">//clicking on</span>
            determineSelectedObject(event-&gt;x(), <span class="keyword">event</span>-&gt;y());
            <span class="keywordflow">if</span> (indexOfSelectedObject != -1) {
                positionDelta = <span class="keyword">event</span>-&gt;pos() - nodes.at(indexOfSelectedObject)-&gt;getPosition();
            }
            <span class="keywordflow">break</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a88731365371079103895acfd9c1e4f1e"></a><!-- doxytag: member="Canvas::mouseReleaseEvent" ref="a88731365371079103895acfd9c1e4f1e" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function will do various things based on what whatToDrawNext is set to. It can create objects and connections, select objects, etc. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton) {
        <span class="keywordflow">switch</span>(whatToDrawNext) {
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d">Object</a>:
            createObject(event-&gt;pos());
            <span class="comment">//Call to update to initiate a paintEvent</span>
            update();
            <span class="keywordflow">break</span>;
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>:
        <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>:
            <span class="keywordflow">break</span>;
        }
    }
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad31a2c6bf464e5eeb0d655ce1006ae7b"></a><!-- doxytag: member="Canvas::on_actionCopy_triggered" ref="ad31a2c6bf464e5eeb0d655ce1006ae7b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionCopy_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fa86758f4fd6a013c5578ef2db0bd70"></a><!-- doxytag: member="Canvas::on_actionCut_triggered" ref="a2fa86758f4fd6a013c5578ef2db0bd70" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionCut_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{

}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a27a449b95938b06f94a155842b6d4f"></a><!-- doxytag: member="Canvas::on_actionDelete_triggered" ref="a0a27a449b95938b06f94a155842b6d4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionDelete_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    <span class="comment">//</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0c87406505f31a8d86cd4a44b5f3c92b"></a><!-- doxytag: member="Canvas::on_actionPaste_triggered" ref="a0c87406505f31a8d86cd4a44b5f3c92b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionPaste_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{

}
</pre></div>
</div>
</div>
<a class="anchor" id="a550abe54072b8baffae3197170b979b8"></a><!-- doxytag: member="Canvas::paintEvent" ref="a550abe54072b8baffae3197170b979b8" args="(QPaintEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function paints the canvas. That means it draws the background grid and then calls drawList. </p>
<div class="fragment"><pre class="fragment">{
     QPainter painter(<span class="keyword">this</span>);

     <span class="comment">/* Draw a grid. Shamelessly stolen from a previous</span>
<span class="comment">      * assignment. */</span>
     <span class="keywordtype">int</span> lineThickness = 1;
     QColor lineColor = QColor(245,245,245,255);
     <span class="keywordtype">int</span> colWidth = 10;
     <span class="keywordtype">int</span> rowHeight = 10;
     <span class="comment">//set up the pen using the preferences</span>
     QPen pen;
     pen.setWidth(lineThickness);
     pen.setColor(lineColor);
<span class="comment">//     pen.setStyle(Qt::DotLine);</span>
     painter.setPen(pen);

     <span class="comment">//Create two vectors of lines, then use drawLines</span>
     <span class="comment">//to draw them</span>
     QVector&lt;QLine&gt; hlines;
     QVector&lt;QLine&gt; vlines;
     <span class="keywordtype">int</span> vlinescount = width()/colWidth + 1;
     <span class="keywordtype">int</span> hlinescount = height()/rowHeight + 1;
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;vlinescount; i++) {
         vlines.push_back(QLine(i*colWidth, 0, i*colWidth, hlinescount*rowHeight));
     }
     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;hlinescount; i++) {
         hlines.push_back(QLine(0, i*rowHeight, vlinescount*colWidth, i*rowHeight));
     }
     painter.drawLines(hlines);
     painter.drawLines(vlines);

     <span class="comment">//Draw the nodes!!!</span>
     drawList(painter);

     <span class="comment">//Kill the painter</span>
     painter.end();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa513204cd16f292e7540ce9d69b2c217"></a><!-- doxytag: member="Canvas::setMode" ref="aa513204cd16f292e7540ce9d69b2c217" args="(DrawingNext mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::setMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7">Canvas::DrawingNext</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called when you want to set what type of object the canvas is going to draw next. </p>
<div class="fragment"><pre class="fragment">{
    whatToDrawNext = mode;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab0d4d4871a182edcf19c5780df3075b9"></a><!-- doxytag: member="Canvas::setNewShape" ref="ab0d4d4871a182edcf19c5780df3075b9" args="(ShapeType type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::setNewShape </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCanvas.html#a5ca00bec13c2ec13d78b17c64e7cef27">ShapeType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called when you want to set what the canvas is going to draw next. </p>
<div class="fragment"><pre class="fragment">{
    typeOfNewObject = type;
    whatToDrawNext = <a class="code" href="classCanvas.html#a861ada4dfa16993222d5a02ca448d6d7accddfa7d7f8fdfe6419b2df713f5026d">Object</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab2db3175cf429ee9a926aa96962bd210"></a><!-- doxytag: member="Canvas::sizeHint" ref="ab2db3175cf429ee9a926aa96962bd210" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSize Canvas::sizeHint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sizeHint: returns a recomended size, used by layouts. </p>
<div class="fragment"><pre class="fragment">{
    <span class="keywordflow">return</span> QSize(50,50);
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/logan/Programming/puml/src/<a class="el" href="canvas_8h_source.html">canvas.h</a></li>
<li>/home/logan/Programming/puml/src/<a class="el" href="canvas_8cpp.html">canvas.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Jan 28 2012 12:24:48 for pUML by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
