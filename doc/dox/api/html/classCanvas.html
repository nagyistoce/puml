<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>pUML: Canvas Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">pUML</div>
   <div id="projectbrief">pUML--phunctionalUMLeditor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">Canvas Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="Canvas" -->
<p><code>#include &lt;<a class="el" href="canvas_8h_source.html">canvas.h</a>&gt;</code></p>

<p><a href="classCanvas-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">DrawingMode</a> { <a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d">Object</a>, 
<a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>, 
<a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a0a27a449b95938b06f94a155842b6d4f">on_actionDelete_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a2fa86758f4fd6a013c5578ef2db0bd70">on_actionCut_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ad31a2c6bf464e5eeb0d655ce1006ae7b">on_actionCopy_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a0c87406505f31a8d86cd4a44b5f3c92b">on_actionPaste_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#afd632b3d287fa79c6aa4c5d6283cdf60">on_actionProperties_triggered</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="signals"></a>
Signals</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#aee2522d5bb1a8cc049a4109946f59ad2">objectSelectionChange</a> (const QPoint &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a4d3bc0fde2328abf64cdc7364549bdab">moveSelectedObject</a> (const QPoint &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ac5e14d00e3ff7830b34b16ce756c03e8">createObject</a> (const QPoint &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a2376985f8980b427ad2b25ac27f68d28">createConnectionPoint1</a> (const QPoint &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a5b4c8392a488548a9b1bfc5dd6086067">createConnectionPoint2</a> (const QPoint &amp;point)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ae33c347b9e009b093f96fe5f5a0bd7cc">redraw</a> (QPainter &amp;painter)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a3f40ff5164e2e4e3e46b9664a6fa6820">showPropertiesDialog</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a1a9dbf7f189eeb4a273f1982a63b2d79">removeObject</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a5525075d65b32480dd518d382946e0ea">Canvas</a> (QWidget *parent=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QSize&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ab2db3175cf429ee9a926aa96962bd210">sizeHint</a> () const </td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a205debe0c8b4218d7f9738a4051f80db">setMode</a> (<a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">DrawingMode</a> mode)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">DrawingMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a921024255b476c0f25ca775ed9d80ac2">getMode</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#ab7d52f6f1fc590fc41aa55219059c9ee">getDocumentIndex</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#aac3a3ff62d4adece9f0b28b1ce97a330">setDocumentIndex</a> (int docIndex)</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a88731365371079103895acfd9c1e4f1e">mouseReleaseEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#abc2200972cf33fd8991d4759955eb0d8">mousePressEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a550abe54072b8baffae3197170b979b8">paintEvent</a> (QPaintEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#a9fb4b83a1067ddc2aa04676f51dc5a47">mouseMoveEvent</a> (QMouseEvent *event)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCanvas.html#aad2e05730114da14b79fef251f7578e8">contextMenuEvent</a> (QContextMenuEvent *event)</td></tr>
</table>
<hr/><h2>Member Enumeration Documentation</h2>
<a class="anchor" id="af2fe83ddca6a5fccac7896a7ecb1be84"></a><!-- doxytag: member="Canvas::DrawingMode" ref="af2fe83ddca6a5fccac7896a7ecb1be84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">Canvas::DrawingMode</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d"></a><!-- doxytag: member="Object" ref="af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d" args="" -->Object</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd"></a><!-- doxytag: member="Connection" ref="af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd" args="" -->Connection</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d"></a><!-- doxytag: member="Nothing" ref="af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d" args="" -->Nothing</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>
<div class="fragment"><pre class="fragment">                     {
        <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d">Object</a>,
        <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>,
        <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>
    };
</pre></div>
</div>
</div>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a5525075d65b32480dd518d382946e0ea"></a><!-- doxytag: member="Canvas::Canvas" ref="a5525075d65b32480dd518d382946e0ea" args="(QWidget *parent=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Canvas::Canvas </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Constructor for the canvas. It sets the sizing policy, sets the background to white, and sets the whatToDrawNext variable to Nothing. </p>
<div class="fragment"><pre class="fragment">       :QWidget(parent) {
  <span class="comment">// Set the size policy to say that sizeHint() is a recomended</span>
  <span class="comment">// minimum, but the widget should take up all space available,</span>
  <span class="comment">// and the widget can also be smaller than the sizeHint().</span>
  setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);

  <span class="comment">// Set the background to white. This is done by setting the</span>
  <span class="comment">// background role of a new palette to white, and then setting</span>
  <span class="comment">// that palette to this widget. This way the background color</span>
  <span class="comment">// is painted before the paintevent is called</span>
  setAutoFillBackground(<span class="keyword">true</span>);
  QPalette newPalette(palette());
  newPalette.setColor(QPalette::Window, Qt::white);
  setPalette(newPalette);

  <span class="comment">// Initialize typeOfNewObject</span>
  drawingMode = <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>;

  <span class="comment">// Create the actions</span>
  actionDelete = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
  actionDelete-&gt;setText(<span class="stringliteral">&quot;Delete&quot;</span>);
  actionCut = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
  actionCut-&gt;setText(<span class="stringliteral">&quot;Cut&quot;</span>);
  actionCopy = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
  actionCopy-&gt;setText(<span class="stringliteral">&quot;Copy&quot;</span>);
  actionPaste = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
  actionPaste-&gt;setText(<span class="stringliteral">&quot;Paste&quot;</span>);
  actionProperties = <span class="keyword">new</span> QAction(<span class="keyword">this</span>);
  actionProperties-&gt;setText(<span class="stringliteral">&quot;Properties&quot;</span>);
  connect(actionDelete, SIGNAL(triggered()),
          <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a0a27a449b95938b06f94a155842b6d4f">on_actionDelete_triggered</a>()));
  connect(actionCut, SIGNAL(triggered()),
          <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a2fa86758f4fd6a013c5578ef2db0bd70">on_actionCut_triggered</a>()));
  connect(actionCopy, SIGNAL(triggered()),
          <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#ad31a2c6bf464e5eeb0d655ce1006ae7b">on_actionCopy_triggered</a>()));
  connect(actionPaste, SIGNAL(triggered()),
          <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#a0c87406505f31a8d86cd4a44b5f3c92b">on_actionPaste_triggered</a>()));
  connect(actionProperties, SIGNAL(triggered()),
          <span class="keyword">this</span>, SLOT(<a class="code" href="classCanvas.html#afd632b3d287fa79c6aa4c5d6283cdf60">on_actionProperties_triggered</a>()));

  menuPopup = <span class="keyword">new</span> QMenu(<span class="keyword">this</span>);
  menuPopup-&gt;addAction(actionCut);
  menuPopup-&gt;addAction(actionCopy);
  menuPopup-&gt;addAction(actionPaste);
  menuPopup-&gt;addAction(actionDelete);
  menuPopup-&gt;addAction(actionProperties);

  <span class="comment">// setContextMenuPolicy(Qt::CustomContextMenu);</span>
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aad2e05730114da14b79fef251f7578e8"></a><!-- doxytag: member="Canvas::contextMenuEvent" ref="aad2e05730114da14b79fef251f7578e8" args="(QContextMenuEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::contextMenuEvent </td>
          <td>(</td>
          <td class="paramtype">QContextMenuEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called when the widget thinks that a context menu is needed. E.g., the right mouse button is clicked or the menu button is pressed. </p>
<div class="fragment"><pre class="fragment">                                                      {
  <span class="comment">// select what&#39;s the under the mouse</span>
  emit <a class="code" href="classCanvas.html#aee2522d5bb1a8cc049a4109946f59ad2">objectSelectionChange</a>(event-&gt;pos());
  <span class="comment">// popup the menu at the current mouse position</span>
  menuPopup-&gt;exec(event-&gt;globalPos());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2376985f8980b427ad2b25ac27f68d28"></a><!-- doxytag: member="Canvas::createConnectionPoint1" ref="a2376985f8980b427ad2b25ac27f68d28" args="(const QPoint &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::createConnectionPoint1 </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a5b4c8392a488548a9b1bfc5dd6086067"></a><!-- doxytag: member="Canvas::createConnectionPoint2" ref="a5b4c8392a488548a9b1bfc5dd6086067" args="(const QPoint &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::createConnectionPoint2 </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ac5e14d00e3ff7830b34b16ce756c03e8"></a><!-- doxytag: member="Canvas::createObject" ref="ac5e14d00e3ff7830b34b16ce756c03e8" args="(const QPoint &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::createObject </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab7d52f6f1fc590fc41aa55219059c9ee"></a><!-- doxytag: member="Canvas::getDocumentIndex" ref="ab7d52f6f1fc590fc41aa55219059c9ee" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Canvas::getDocumentIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> documentIndex; }
</pre></div>
</div>
</div>
<a class="anchor" id="a921024255b476c0f25ca775ed9d80ac2"></a><!-- doxytag: member="Canvas::getMode" ref="a921024255b476c0f25ca775ed9d80ac2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">DrawingMode</a> Canvas::getMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ <span class="keywordflow">return</span> drawingMode; }
</pre></div>
</div>
</div>
<a class="anchor" id="a9fb4b83a1067ddc2aa04676f51dc5a47"></a><!-- doxytag: member="Canvas::mouseMoveEvent" ref="a9fb4b83a1067ddc2aa04676f51dc5a47" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mouseMoveEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>In the mouseMoveEvent of the canvas, an object will be moved if the canvas is in selection mode. </p>
<div class="fragment"><pre class="fragment">                                              {
  <span class="keywordflow">if</span> (event-&gt;buttons() = Qt::LeftButton) {
    <span class="keywordflow">switch</span> (drawingMode) {
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>:
      <span class="comment">// The user is moving the mouse while holding down</span>
      <span class="comment">// the left mouse button, and the canvas is in</span>
      <span class="comment">// selection mode, they must be dragging!</span>
      emit <a class="code" href="classCanvas.html#a4d3bc0fde2328abf64cdc7364549bdab">moveSelectedObject</a>(this-&gt;mapFromGlobal(event-&gt;globalPos()));
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>:
      <span class="comment">// update the second line hint point</span>
      lineHint2 = this-&gt;mapFromGlobal(event-&gt;globalPos());
      update();
      <span class="keywordflow">break</span>;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="abc2200972cf33fd8991d4759955eb0d8"></a><!-- doxytag: member="Canvas::mousePressEvent" ref="abc2200972cf33fd8991d4759955eb0d8" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mousePressEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This event occures when the user presses down on the the mouse but hasn't release it yet. Here is where we want to select objects if the canvas is in selection mode. </p>
<div class="fragment"><pre class="fragment">                                               {
  <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton) {
    <span class="keywordflow">switch</span> (drawingMode) {
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d">Object</a>:
      <span class="comment">// don&#39;t select or draw anything,</span>
      <span class="comment">// the work is done in the release event</span>
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>:
      <span class="comment">// let the document know what the first point was</span>
      <span class="comment">// The document will work out what to connect to.</span>
      emit <a class="code" href="classCanvas.html#a2376985f8980b427ad2b25ac27f68d28">createConnectionPoint1</a>(event-&gt;pos());
      <span class="comment">// start drawing the line hint</span>
      drawLineHint = <span class="keyword">true</span>;
      lineHint1 = <span class="keyword">event</span>-&gt;pos();
      lineHint2 = <span class="keyword">event</span>-&gt;pos();
      update();
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>:
      <span class="comment">// let the document know that the new selection is</span>
      <span class="comment">// under this position.</span>
      emit <a class="code" href="classCanvas.html#aee2522d5bb1a8cc049a4109946f59ad2">objectSelectionChange</a>(event-&gt;pos());
      <span class="keywordflow">break</span>;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a88731365371079103895acfd9c1e4f1e"></a><!-- doxytag: member="Canvas::mouseReleaseEvent" ref="a88731365371079103895acfd9c1e4f1e" args="(QMouseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::mouseReleaseEvent </td>
          <td>(</td>
          <td class="paramtype">QMouseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function will do various things based on what whatToDrawNext is set to. It can create objects and connections, select objects, etc. </p>
<div class="fragment"><pre class="fragment">                                                 {
  <span class="comment">// QMessageBox::information(0, &quot;pUML&quot;, QString::number((int)drawingMode),</span>
  <span class="comment">//                          QMessageBox::Ok);</span>
  <span class="keywordflow">if</span> (event-&gt;button() == Qt::LeftButton) {
    <span class="keywordflow">switch</span> (drawingMode) {
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84accddfa7d7f8fdfe6419b2df713f5026d">Object</a>:
      <span class="comment">// let the document know to create an object at this position.</span>
      emit <a class="code" href="classCanvas.html#ac5e14d00e3ff7830b34b16ce756c03e8">createObject</a>(event-&gt;pos());
      <span class="comment">// tell the document to show a properties dialog.</span>
      emit <a class="code" href="classCanvas.html#a3f40ff5164e2e4e3e46b9664a6fa6820">showPropertiesDialog</a>();
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ae7676fce1cf0da6e2b67d71a789ba7bd">Connection</a>:
      <span class="comment">// let the document know this is the second connection position.</span>
      emit <a class="code" href="classCanvas.html#a5b4c8392a488548a9b1bfc5dd6086067">createConnectionPoint2</a>(event-&gt;pos());
      <span class="comment">// stop drawing the line hint</span>
      drawLineHint = <span class="keyword">false</span>;
      update();
      <span class="keywordflow">break</span>;
    <span class="keywordflow">case</span> <a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Nothing</a>:
      <span class="comment">// QMessageBox::information(0, &quot;pUML&quot;, &quot;Mouse Release Nothing&quot;,</span>
      <span class="comment">//                          QMessageBox::Ok);</span>
      <span class="keywordflow">break</span>;
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4d3bc0fde2328abf64cdc7364549bdab"></a><!-- doxytag: member="Canvas::moveSelectedObject" ref="a4d3bc0fde2328abf64cdc7364549bdab" args="(const QPoint &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::moveSelectedObject </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aee2522d5bb1a8cc049a4109946f59ad2"></a><!-- doxytag: member="Canvas::objectSelectionChange" ref="aee2522d5bb1a8cc049a4109946f59ad2" args="(const QPoint &amp;point)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::objectSelectionChange </td>
          <td>(</td>
          <td class="paramtype">const QPoint &amp;&#160;</td>
          <td class="paramname"><em>point</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad31a2c6bf464e5eeb0d655ce1006ae7b"></a><!-- doxytag: member="Canvas::on_actionCopy_triggered" ref="ad31a2c6bf464e5eeb0d655ce1006ae7b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionCopy_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                     {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a2fa86758f4fd6a013c5578ef2db0bd70"></a><!-- doxytag: member="Canvas::on_actionCut_triggered" ref="a2fa86758f4fd6a013c5578ef2db0bd70" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionCut_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                    {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0a27a449b95938b06f94a155842b6d4f"></a><!-- doxytag: member="Canvas::on_actionDelete_triggered" ref="a0a27a449b95938b06f94a155842b6d4f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionDelete_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                       {
  emit <a class="code" href="classCanvas.html#a1a9dbf7f189eeb4a273f1982a63b2d79">removeObject</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0c87406505f31a8d86cd4a44b5f3c92b"></a><!-- doxytag: member="Canvas::on_actionPaste_triggered" ref="a0c87406505f31a8d86cd4a44b5f3c92b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionPaste_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                      {
}
</pre></div>
</div>
</div>
<a class="anchor" id="afd632b3d287fa79c6aa4c5d6283cdf60"></a><!-- doxytag: member="Canvas::on_actionProperties_triggered" ref="afd632b3d287fa79c6aa4c5d6283cdf60" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::on_actionProperties_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                           {
  <span class="comment">// Call up the properties for the node.</span>
  emit <a class="code" href="classCanvas.html#a3f40ff5164e2e4e3e46b9664a6fa6820">showPropertiesDialog</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="a550abe54072b8baffae3197170b979b8"></a><!-- doxytag: member="Canvas::paintEvent" ref="a550abe54072b8baffae3197170b979b8" args="(QPaintEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function paints the canvas. That means it draws the background grid and then calls drawList. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Update the grid settings using some sort of user preference </dd></dl>
<div class="fragment"><pre class="fragment">                                          {
  QPainter painter(<span class="keyword">this</span>);

  <span class="comment">/* Draw a grid. Shamelessly stolen from a previous</span>
<span class="comment">   * assignment. */</span>
  <span class="comment">/* Update with stored preferences, zoom level */</span>
  <span class="keywordtype">int</span> lineThickness = 1;
  QColor lineColor = QColor(245, 245, 245, 255);
  <span class="keywordtype">int</span> colWidth = 10;
  <span class="keywordtype">int</span> rowHeight = 10;

  <span class="comment">// set up the pen using the preferences</span>
  QPen pen;
  pen.setWidth(lineThickness);
  pen.setColor(lineColor);
<span class="comment">//  pen.setStyle(Qt::DotLine);</span>
  painter.setPen(pen);

  <span class="comment">// Create two vectors of lines, then use drawLines</span>
  <span class="comment">// to draw them</span>
  QVector&lt;QLine&gt; hlines;
  QVector&lt;QLine&gt; vlines;
  <span class="keywordtype">int</span> vlinescount = width()/colWidth + 1;
  <span class="keywordtype">int</span> hlinescount = height()/rowHeight + 1;
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; vlinescount; i++) {
    vlines.push_back(QLine(i*colWidth, 0, i*colWidth, hlinescount*rowHeight));
  }
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; hlinescount; i++) {
    hlines.push_back(QLine(0, i*rowHeight,
                           vlinescount*colWidth, i*rowHeight));
  }
  painter.drawLines(hlines);
  painter.drawLines(vlines);

  <span class="comment">// draw the line hint for connections if need be</span>
  <span class="keywordflow">if</span> (drawLineHint == <span class="keyword">true</span>) {
    pen.setWidth(2);
    pen.setColor(Qt::blue);
    painter.setPen(pen);
    painter.drawLine(lineHint1, lineHint2);
  }

  <span class="comment">// Draw the nodes!!!</span>
  <span class="comment">// Emit a draw signal</span>
  emit <a class="code" href="classCanvas.html#ae33c347b9e009b093f96fe5f5a0bd7cc">redraw</a>(painter);

  <span class="comment">// Kill the painter</span>
  painter.end();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae33c347b9e009b093f96fe5f5a0bd7cc"></a><!-- doxytag: member="Canvas::redraw" ref="ae33c347b9e009b093f96fe5f5a0bd7cc" args="(QPainter &amp;painter)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::redraw </td>
          <td>(</td>
          <td class="paramtype">QPainter &amp;&#160;</td>
          <td class="paramname"><em>painter</em></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1a9dbf7f189eeb4a273f1982a63b2d79"></a><!-- doxytag: member="Canvas::removeObject" ref="a1a9dbf7f189eeb4a273f1982a63b2d79" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::removeObject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aac3a3ff62d4adece9f0b28b1ce97a330"></a><!-- doxytag: member="Canvas::setDocumentIndex" ref="aac3a3ff62d4adece9f0b28b1ce97a330" args="(int docIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::setDocumentIndex </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>docIndex</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{ documentIndex = docIndex; }
</pre></div>
</div>
</div>
<a class="anchor" id="a205debe0c8b4218d7f9738a4051f80db"></a><!-- doxytag: member="Canvas::setMode" ref="a205debe0c8b4218d7f9738a4051f80db" args="(DrawingMode mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::setMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">DrawingMode</a>&#160;</td>
          <td class="paramname"><em>mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This function is called when you want to set what type of object the canvas is going to draw next. </p>
<div class="fragment"><pre class="fragment">                                     {
  drawingMode = mode;
  <span class="comment">// QMessageBox::information(0, &quot;setMode: mode&quot;,</span>
  <span class="comment">//                          QString::number((int)drawingMode),</span>
  <span class="comment">//                          QMessageBox::Ok);</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a3f40ff5164e2e4e3e46b9664a6fa6820"></a><!-- doxytag: member="Canvas::showPropertiesDialog" ref="a3f40ff5164e2e4e3e46b9664a6fa6820" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Canvas::showPropertiesDialog </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab2db3175cf429ee9a926aa96962bd210"></a><!-- doxytag: member="Canvas::sizeHint" ref="ab2db3175cf429ee9a926aa96962bd210" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QSize Canvas::sizeHint </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>sizeHint: returns a recomended size, used by layouts. </p>
<div class="fragment"><pre class="fragment">                             {
  <span class="keywordflow">return</span> QSize(50, 50);
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/logan/Programming/puml/src/<a class="el" href="canvas_8h_source.html">canvas.h</a></li>
<li>/home/logan/Programming/puml/src/<a class="el" href="canvas_8cpp.html">canvas.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat Feb 25 2012 11:31:46 for pUML by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
