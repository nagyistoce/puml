<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>pUML: MainWindow Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">pUML</div>
   <div id="projectbrief">pUML--phunctionalUMLeditor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">MainWindow Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MainWindow" -->
<p><code>#include &lt;<a class="el" href="mainwindow_8h_source.html">mainwindow.h</a>&gt;</code></p>

<p><a href="classMainWindow-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a9f891e359fd184a9b919d8655eefdf1a">setSelect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#aed8d4c16aaa87ae02a2de2edd5fc91c7">on_actionNew_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a48ed0a16f674e38e0e2a24274852a9af">on_actionOpen_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ad550c61cfa05c7e528dedc6cf636ed10">on_actionSave_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a98e86ef6104b6e2910328af2f878438d">on_actionSave_As_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a214a1a535fdbf35b0ed12e26231eef56">on_actionPrint_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#aa79d81d79f11fed5ecdfa86ec3cf4c47">on_actionImport_Export_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ab4487c4b02224acd4a0193d38b704ddb">on_actionExit_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ad961df58a2f20f09dd16c856b1f3040a">on_actionCopy_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a02df09004a7752e6f1bd3355a19999d3">on_actionCut_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a0e835b057aadd7902e431132e9d842cb">on_actionPaste_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a79d6f0d11ff29e98fbb854e0201b86b4">on_actionSelect_All_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a84b9cea338a6bf0c0c1d4d126e253029">on_actionInverse_Select_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a31b755085ba6efb58cac20c8e5274582">on_actionDocument_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a4f3ebda1ba39e0ef4d678b44893c9c7f">on_actionAbout_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a723573a6fb06dcc3d8253587922d3a3f">on_actionSelect_triggered</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a0148d929d5a42d11abc8e383942ae41d">on_tabWidget_currentChanged</a> (int newIndex)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a361427603ef01011e0739947ceacafa8">on_tabWidget_tabCloseRequest</a> (int index)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a48a3ce89fb32fcb0b1cbd5dbc9fa7624">on_NodeAction_triggered</a> (<a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">Canvas::DrawingMode</a> drawingMode, int prototypeID)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a0404333cdda871ecfa98bedd3bd3c107">updateDiagramType</a> (<a class="el" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcd">BaseNode::DiagramType</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ae66396b9e22dcd5d6e2bd81cbeab9db7">createNewDiagram</a> (<a class="el" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcd">BaseNode::DiagramType</a> type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#af91204ae6780f2ac2992b60f97c152bd">openDiagram</a> (const QString &amp;openName)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a9d3175934c46db440a1821eb0203a227">documentModifiedChanged</a> (bool modified)</td></tr>
<tr><td colspan="2"><h2><a name="signals"></a>
Signals</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ac0de13008beb3a989509fed14bd7f6e9">toggle_toolbar</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a8b244be8b7b7db1b08de2a2acb9409db">MainWindow</a> (QWidget *parent=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#ae98d00a93bc118200eeef9f9bba1dba7">~MainWindow</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMainWindow.html#a4e20a4a065fbb0e4d3532a45a0a91425">closeEvent</a> (QCloseEvent *event)</td></tr>
</table>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8b244be8b7b7db1b08de2a2acb9409db"></a><!-- doxytag: member="MainWindow::MainWindow" ref="a8b244be8b7b7db1b08de2a2acb9409db" args="(QWidget *parent=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainWindow::MainWindow </td>
          <td>(</td>
          <td class="paramtype">QWidget *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code></td><td>)</td>
          <td><code> [explicit]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>In the <a class="el" href="classMainWindow.html">MainWindow</a> constructor, we need to create all the actions, menus and widgets. registerObject is used to add prototypes to the <a class="el" href="classNodeFactory.html">NodeFactory</a> and their buttons to the menus and toolbar. The new document slot is triggered. </p>
<div class="fragment"><pre class="fragment">           :QMainWindow(parent) {
  createWidgets();
  createActions();
  createMenus();
  connectSignalsSlots();

  <span class="comment">// signalMapper = new QSignalMapper(this);</span>
  currentDocument = -1;

  <span class="comment">// Use case objects</span>
  registerObject(<span class="keyword">new</span> <a class="code" href="classOvalObject.html" title="This concrete class is the Oval node.">OvalObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classStickPersonObject.html" title="This concrete class is the StickPerson node.">StickPersonObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classInteractionConnection.html" title="This concrete class defines an Interaction line in a Use Case diagram (line from the actor to the use...">InteractionConnection</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classExtendsConnection.html" title="This concrete class defines an Extends line in a Use Case diagram (line from the actor to the use cas...">ExtendsConnection</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classIncludesConnection.html">IncludesConnection</a>);

  <span class="comment">// statechart objects</span>
  registerObject(<span class="keyword">new</span> <a class="code" href="classStateObject.html" title="This concrete class is the State node.">StateObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classInitialStateObject.html" title="This concrete class is the State node.">InitialStateObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classFinalStateObject.html" title="This concrete class is the Final State node.">FinalStateObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classTransitionConnection.html" title="This concrete class defines an Interaction line in a Use Case diagram (line from the actor to the use...">TransitionConnection</a>);

  <span class="comment">// class objects</span>
  registerObject(<span class="keyword">new</span> <a class="code" href="classClassBoxObject.html" title="This concrete class is the ClassBox node.">ClassBoxObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classClassConnection.html" title="This concrete class defines ...">ClassConnection</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classInheritanceConnection.html">InheritanceConnection</a>);

  <span class="comment">// register collab objects</span>
  registerObject(<span class="keyword">new</span> <a class="code" href="classStickPersonCollabObject.html" title="This concrete class is the StickPersonCollab node.">StickPersonCollabObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classBoxCollabObject.html" title="This concrete class is the BoxCollabObject node.">BoxCollabObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classMultiBoxCollabObject.html" title="This concrete class is the MultiBoxCollabObject node.">MultiBoxCollabObject</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classCollabConnection.html" title="This concrete class defines ...">CollabConnection</a>);
  registerObject(<span class="keyword">new</span> <a class="code" href="classCollabSelfConnection.html" title="This concrete class defines ...">CollabSelfConnection</a>);

  this-&gt;resize(700, 500);
  this-&gt;setWindowTitle(tr(<span class="stringliteral">&quot;Phunctional UML Editor&quot;</span>));

  <span class="comment">// Show the Open/New dialog</span>
  openFileNewDialog(<a class="code" href="classConfigDialog.html#a6b6ce45ecbffff895dcb67d15f7ea699afa5d4322be3b1880ea7dc006a0242d6f">ConfigDialog::OpenAndNew</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae98d00a93bc118200eeef9f9bba1dba7"></a><!-- doxytag: member="MainWindow::~MainWindow" ref="ae98d00a93bc118200eeef9f9bba1dba7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MainWindow::~MainWindow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This deconstructor frees up the memory held in any vectors that hold objects which don't have parents (basically any non-Qt objects) </p>
<div class="fragment"><pre class="fragment">                        {
  <span class="comment">// Since we have a vector of pointers, we need to make sure</span>
  <span class="comment">// to free all of them manually.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; static_cast&lt;int&gt;(documents.size()); i++) {
    assert(actions.at(i) != 0);
    <span class="keyword">delete</span> documents.at(i);
  }
}
</pre></div>
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a4e20a4a065fbb0e4d3532a45a0a91425"></a><!-- doxytag: member="MainWindow::closeEvent" ref="a4e20a4a065fbb0e4d3532a45a0a91425" args="(QCloseEvent *event)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::closeEvent </td>
          <td>(</td>
          <td class="paramtype">QCloseEvent *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                              {
    <span class="keyword">event</span>-&gt;accept();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae66396b9e22dcd5d6e2bd81cbeab9db7"></a><!-- doxytag: member="MainWindow::createNewDiagram" ref="ae66396b9e22dcd5d6e2bd81cbeab9db7" args="(BaseNode::DiagramType type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::createNewDiagram </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcd">BaseNode::DiagramType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This slot creates a new <a class="el" href="classCanvas.html">Canvas</a>, <a class="el" href="classDocument.html">Document</a> and Tab with the given diagram type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The new diagram type </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                          {
  <span class="keywordflow">if</span> (type != <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcda76aa2a7edeab2377d00af42cfdc4334c">BaseNode::Nothing</a>) {
    <span class="comment">// Create the new document and canvas</span>
    <a class="code" href="classDocument.html">Document</a> *newdoc = <span class="keyword">new</span> <a class="code" href="classDocument.html">Document</a>;
    documents.push_back(newdoc);
    <a class="code" href="classCanvas.html">Canvas</a>* newcanvas = <span class="keyword">new</span> <a class="code" href="classCanvas.html">Canvas</a>;
    canvases.push_back(newcanvas);

    <span class="comment">// set the diagram type</span>
    newdoc-&gt;<a class="code" href="classDocument.html#a44757e4a0f79b1928a9f171eef95ae2b">setDiagramType</a>(type);

    <span class="comment">// set the parent to this so that they get automically deleted</span>
    <span class="comment">// when the program shuts down</span>
    <span class="comment">// newdoc-&gt;setParent(this);</span>
    <span class="comment">// newcanvas-&gt;setParent(this);</span>

    <span class="comment">// Update the canvas and document index on the canvas and document</span>
    newdoc-&gt;<a class="code" href="classDocument.html#a89ec2c397b4e8ff253221928ada46a66">setCanvasIndex</a>(canvases.size()-1);
    newcanvas-&gt;<a class="code" href="classCanvas.html#aac3a3ff62d4adece9f0b28b1ce97a330">setDocumentIndex</a>(documents.size()-1);

    <span class="comment">// add the tab and update the map.</span>
    <span class="comment">// Notice that the mapping is inserted before the tab is created. This</span>
    <span class="comment">// is so that the mapping is already there when the</span>
    <span class="comment">// on_tabWidget_currentChanged slot is called, the mapping is already there.</span>
    <span class="comment">// Note that this assumes (which is a valid assumption) that newTabIndex</span>
    <span class="comment">// returned by addTab is always equal to the number of tabs.</span>

    <span class="comment">// NOTE: Because the tabs can be reordered, tabToCanvasMappings is unused.</span>
    tabToCanvasMappings.insert(
          std::pair&lt;int, int&gt;(tabWidget-&gt;count(), canvases.size() - 1));
    <span class="keywordtype">int</span> newTabIndex;
    <span class="keywordflow">if</span> (type == <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcda8de03f85f228905b24b6ced5f8037a69">BaseNode::Class</a>){
        newTabIndex = tabWidget-&gt;addTab(newcanvas, <span class="stringliteral">&quot;New Class Diagram&quot;</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type == <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcdac7772d1045a9dad07f5fe029a36fcf50">BaseNode::Collaboration</a>){
        newTabIndex = tabWidget-&gt;addTab(newcanvas, <span class="stringliteral">&quot;New Collaboration Diagram&quot;</span>);
    }
    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type == <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcda8c7df3c6e052df3f1ab6f0025a348a7a">BaseNode::UseCase</a>){
        newTabIndex = tabWidget-&gt;addTab(newcanvas, <span class="stringliteral">&quot;New Use Case Diagram&quot;</span>);
    }
    <span class="keywordflow">else</span>{
        newTabIndex = tabWidget-&gt;addTab(newcanvas, <span class="stringliteral">&quot;New Statechart Diagram&quot;</span>);
    }

    <span class="comment">// Connect the new canvas with the new document.</span>
    connectCanvasWithDocument(canvases.size() - 1, documents.size() - 1);

    <span class="comment">// Change to the new tab</span>
    tabWidget-&gt;setCurrentIndex(newTabIndex);

    <span class="comment">// Update the toolbars</span>
    <a class="code" href="classMainWindow.html#a0404333cdda871ecfa98bedd3bd3c107">updateDiagramType</a>(type);
  } <span class="keywordflow">else</span> {
    <span class="comment">// If the diagram type is nothing and there is no tabs,</span>
    <span class="comment">// update the toolbar to reflect it</span>
    <span class="keywordflow">if</span> (tabWidget-&gt;count() == 0) {
      <a class="code" href="classMainWindow.html#a0404333cdda871ecfa98bedd3bd3c107">updateDiagramType</a>(type);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9d3175934c46db440a1821eb0203a227"></a><!-- doxytag: member="MainWindow::documentModifiedChanged" ref="a9d3175934c46db440a1821eb0203a227" args="(bool modified)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::documentModifiedChanged </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>modified</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
  QChar lastchar;
  QString tabtext = tabWidget-&gt;tabText(tabWidget-&gt;currentIndex());
  lastchar = tabtext.at(tabtext.size()-1);
  <span class="keywordflow">if</span> (modified == <span class="keyword">true</span>) {
    <span class="comment">// we need to add a &#39;*&#39; to the end of the tab text</span>
    <span class="keywordflow">if</span> (lastchar != <span class="charliteral">&#39;*&#39;</span>) {
      tabtext += <span class="charliteral">&#39;*&#39;</span>;
    }
  } <span class="keywordflow">else</span> {
    <span class="comment">// we need to take away any &#39;*&#39; at the end of the tab text</span>
    <span class="keywordflow">if</span> (lastchar == <span class="charliteral">&#39;*&#39;</span>) {
      tabtext = tabtext.left(tabtext.size()-1);
    }
  }
  tabWidget-&gt;setTabText(tabWidget-&gt;currentIndex(), tabtext);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a4f3ebda1ba39e0ef4d678b44893c9c7f"></a><!-- doxytag: member="MainWindow::on_actionAbout_triggered" ref="a4f3ebda1ba39e0ef4d678b44893c9c7f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionAbout_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                          {
  QMessageBox::about(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;About pUML&quot;</span>),
    tr(<span class="stringliteral">&quot;&lt;p&gt;The &lt;b&gt;pUML&lt;/b&gt; project is the CS383 Software Engeering I Class&quot;</span>
     <span class="stringliteral">&quot; final project.&lt;/p&gt;&lt;p&gt; It was developed by seven awesome students during&quot;</span>
     <span class="stringliteral">&quot; their spare time. The development tools is provided by Nokia -- Qt&quot;</span>
     <span class="stringliteral">&quot; and Google code repository.&lt;/p&gt;&quot;</span>));
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad961df58a2f20f09dd16c856b1f3040a"></a><!-- doxytag: member="MainWindow::on_actionCopy_triggered" ref="ad961df58a2f20f09dd16c856b1f3040a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionCopy_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                         {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a02df09004a7752e6f1bd3355a19999d3"></a><!-- doxytag: member="MainWindow::on_actionCut_triggered" ref="a02df09004a7752e6f1bd3355a19999d3" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionCut_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                        {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a31b755085ba6efb58cac20c8e5274582"></a><!-- doxytag: member="MainWindow::on_actionDocument_triggered" ref="a31b755085ba6efb58cac20c8e5274582" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionDocument_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                             {
}
</pre></div>
</div>
</div>
<a class="anchor" id="ab4487c4b02224acd4a0193d38b704ddb"></a><!-- doxytag: member="MainWindow::on_actionExit_triggered" ref="ab4487c4b02224acd4a0193d38b704ddb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionExit_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                         {
  close();
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa79d81d79f11fed5ecdfa86ec3cf4c47"></a><!-- doxytag: member="MainWindow::on_actionImport_Export_triggered" ref="aa79d81d79f11fed5ecdfa86ec3cf4c47" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionImport_Export_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                  {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a84b9cea338a6bf0c0c1d4d126e253029"></a><!-- doxytag: member="MainWindow::on_actionInverse_Select_triggered" ref="a84b9cea338a6bf0c0c1d4d126e253029" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionInverse_Select_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                                   {
}
</pre></div>
</div>
</div>
<a class="anchor" id="aed8d4c16aaa87ae02a2de2edd5fc91c7"></a><!-- doxytag: member="MainWindow::on_actionNew_triggered" ref="aed8d4c16aaa87ae02a2de2edd5fc91c7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionNew_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a new diagram file. This slot first uses the openFileNewDialog function open the Open/NEw dialog with only new diagram options available. That function connects signals from the dialog to the createNewDiagram slot in the <a class="el" href="classMainWindow.html">MainWindow</a>. That slot creates a new diagram, if a new diagram type was chosen. </p>
<div class="fragment"><pre class="fragment">                                        {
  openFileNewDialog(<a class="code" href="classConfigDialog.html#a6b6ce45ecbffff895dcb67d15f7ea699afd4f6d3aae941e9aabcd9528e6d2f806">ConfigDialog::NewOnly</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48ed0a16f674e38e0e2a24274852a9af"></a><!-- doxytag: member="MainWindow::on_actionOpen_triggered" ref="a48ed0a16f674e38e0e2a24274852a9af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionOpen_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The slot for when the open action is triggered. Opens up a dialog and asks for the file name. Then it creates a new tab and opens the document. Note that because the diagram is opened in a new tab this function doesn't need to check if the diagram needs saving first. </p>
<div class="fragment"><pre class="fragment">                                         {
  <span class="comment">// First, get a filename.</span>
  QString openName = QFileDialog::getOpenFileName(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Open Document&quot;</span>),
                                                  <span class="stringliteral">&quot;&quot;</span>, tr(<span class="stringliteral">&quot;pUML files (*.puml)&quot;</span>));
  <span class="comment">// As long as the user didnt&#39; click cancel...</span>
  <span class="keywordflow">if</span> (openName != <span class="stringliteral">&quot;&quot;</span>) {
    <span class="comment">// Use the openDiagram to create the canvas, document and tab and load the file.</span>
    <a class="code" href="classMainWindow.html#af91204ae6780f2ac2992b60f97c152bd">openDiagram</a>(openName);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0e835b057aadd7902e431132e9d842cb"></a><!-- doxytag: member="MainWindow::on_actionPaste_triggered" ref="a0e835b057aadd7902e431132e9d842cb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionPaste_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                          {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a214a1a535fdbf35b0ed12e26231eef56"></a><!-- doxytag: member="MainWindow::on_actionPrint_triggered" ref="a214a1a535fdbf35b0ed12e26231eef56" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionPrint_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                          {
  QPrinter* printer = <span class="keyword">new</span> QPrinter;
  QPrintDialog printDialog(printer, <span class="keyword">this</span>);
  <span class="keywordflow">if</span> (printDialog.exec() == QDialog::Accepted) {
    <span class="comment">//  print ...</span>
  }
  <span class="keyword">delete</span> printer;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a98e86ef6104b6e2910328af2f878438d"></a><!-- doxytag: member="MainWindow::on_actionSave_As_triggered" ref="a98e86ef6104b6e2910328af2f878438d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionSave_As_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Slot. Erases the store filename for the current document and triggers the save action, so the user is asked to specify a file to save to. </p>
<div class="fragment"><pre class="fragment">                                            {
  <span class="comment">// FUTURE: This is currently rigged to save only the current document.</span>
  <span class="comment">// It will need to iterate over all Document objects and save the nodes</span>
  <span class="comment">// vector in each of them.</span>

  <span class="comment">// Remove the filename so it appears the document hasn&#39;t been given a</span>
  <span class="comment">// file name</span>
  documents.at(currentDocument)-&gt;setFilename(<span class="stringliteral">&quot;&quot;</span>);
  <span class="comment">// Trigger the save to get a new filename</span>
  <a class="code" href="classMainWindow.html#ad550c61cfa05c7e528dedc6cf636ed10">on_actionSave_triggered</a>();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad550c61cfa05c7e528dedc6cf636ed10"></a><!-- doxytag: member="MainWindow::on_actionSave_triggered" ref="ad550c61cfa05c7e528dedc6cf636ed10" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionSave_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The slot for when the save action is triggered. If the currently open document is not saved, it triggers the saveas action. If saved successfully then the document is marked as saved. </p>
<div class="fragment"><pre class="fragment">                                         {
  <span class="comment">// First, we need a filename. If there is one already, then use that.</span>
  <span class="keywordflow">if</span> (documents.at(currentDocument)-&gt;hasFilename() == <span class="keyword">true</span>) {
    documents.at(currentDocument)-&gt;saveDocument();
  } <span class="keywordflow">else</span> {
    <span class="comment">// Otherwise, get a new filename.</span>
    QString fileName = QFileDialog::getSaveFileName(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Save Diagram&quot;</span>),
                                                    <span class="stringliteral">&quot;&quot;</span>, tr(<span class="stringliteral">&quot;pUML files (*.puml)&quot;</span>));
    qDebug(qPrintable(fileName));

    <span class="comment">// If the user didn&#39;t click cancel...</span>
    <span class="keywordflow">if</span> (fileName != <span class="stringliteral">&quot;&quot;</span>) {
      <span class="comment">// Set the filename for the document (so we know what filename</span>
      <span class="comment">// to use later when the user clicks on save again).</span>
      documents.at(currentDocument)-&gt;setFilename(fileName);
      <span class="comment">// Ask the document to save the document to it&#39;s fileName.</span>
      documents.at(currentDocument)-&gt;saveDocument();
      <span class="comment">// Update the tab&#39;s text</span>
      tabWidget-&gt;setTabText(tabWidget-&gt;currentIndex(), fileName);
    }
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a79d6f0d11ff29e98fbb854e0201b86b4"></a><!-- doxytag: member="MainWindow::on_actionSelect_All_triggered" ref="a79d6f0d11ff29e98fbb854e0201b86b4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionSelect_All_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">                                               {
}
</pre></div>
</div>
</div>
<a class="anchor" id="a723573a6fb06dcc3d8253587922d3a3f"></a><!-- doxytag: member="MainWindow::on_actionSelect_triggered" ref="a723573a6fb06dcc3d8253587922d3a3f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_actionSelect_triggered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This slot updates the currently active canvas's mode to Nothing. It uses a map of tab indices to canvas indices to find the current canvas. </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>Try move the mappings into the tabs themselves or into the documents to eleminate the need for a map. </dd></dl>
<div class="fragment"><pre class="fragment">                                           {
  <span class="keywordflow">if</span> (tabWidget-&gt;count() != 0) {
    <span class="comment">// The old way with a dynamic cast</span>
    <a class="code" href="classCanvas.html">Canvas</a>* canvas;
    canvas = <span class="keyword">static_cast&lt;</span><a class="code" href="classCanvas.html">Canvas</a>*<span class="keyword">&gt;</span>(tabWidget-&gt;currentWidget());
    canvas-&gt;<a class="code" href="classCanvas.html#a205debe0c8b4218d7f9738a4051f80db">setMode</a>(<a class="code" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84ab5de4f651f3f55d1f7ee2ce89acf768d">Canvas::Nothing</a>);
  }


  <span class="comment">/* The new way with the map :) */</span>
  <span class="comment">// int canvasIndex;</span>
  <span class="comment">// canvasIndex = tabToCanvasMappings[tabWidget-&gt;currentIndex()];</span>
  <span class="comment">// canvases.at(canvasIndex)-&gt;setMode(Canvas::Nothing);</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a48a3ce89fb32fcb0b1cbd5dbc9fa7624"></a><!-- doxytag: member="MainWindow::on_NodeAction_triggered" ref="a48a3ce89fb32fcb0b1cbd5dbc9fa7624" args="(Canvas::DrawingMode drawingMode, int prototypeID)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_NodeAction_triggered </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCanvas.html#af2fe83ddca6a5fccac7896a7ecb1be84">Canvas::DrawingMode</a>&#160;</td>
          <td class="paramname"><em>drawingMode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prototypeID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This slot gets triggered whenever one of the NodeActions are triggered, which could be from the toolbar or menu. Those NodeActions hold the drawingMode and prototypeID. This slot then puts the canvas and document into the right modes and sets the right id's. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">drawingMode</td><td>The drawing mode of the node action. Can be Object, Connection, or Nothing </td></tr>
    <tr><td class="paramname">prototypeID</td><td>The id of the prototype in the <a class="el" href="classNodeFactory.html">NodeFactory</a>. This is irrelevant for a drawing mode of Nothing. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                          {
  <span class="comment">// QMessageBox::information(this, &quot;setPrototypeID: prototypeID&quot;,</span>
  <span class="comment">//                          QString::number(prototypeID), QMessageBox::Ok);</span>

  <span class="comment">// if (tabWidget-&gt;count() != 0 &amp;&amp; tabWidget-&gt;currentIndex() &gt;= 0</span>
  <span class="comment">//     &amp;&amp; tabWidget-&gt;currentIndex() &lt; tabToCanvasMappings.size()) {</span>
  <span class="keywordflow">if</span> (tabWidget-&gt;count() != 0 &amp;&amp; tabWidget-&gt;currentIndex() &gt;= 0) {
    <a class="code" href="classCanvas.html">Canvas</a>* currentCanvas;
    <span class="comment">// int canvasIndex;</span>

    <span class="comment">// Find the current canvas with the map</span>
    <span class="comment">// canvasIndex = tabToCanvasMappings[tabWidget-&gt;currentIndex()];</span>
    <span class="comment">// currentCanvas = canvases.at(canvasIndex);</span>
    currentCanvas = <span class="keyword">static_cast&lt;</span><a class="code" href="classCanvas.html">Canvas</a>*<span class="keyword">&gt;</span>(tabWidget-&gt;currentWidget());

    <span class="comment">// notify the canvas that it should be in object mode</span>
    currentCanvas-&gt;<a class="code" href="classCanvas.html#a205debe0c8b4218d7f9738a4051f80db">setMode</a>(drawingMode);

    <span class="comment">// we need to set the prototype id in currently</span>
    <span class="comment">// active document, so it knows what to create.</span>
    documents.at(currentCanvas-&gt;<a class="code" href="classCanvas.html#ab7d52f6f1fc590fc41aa55219059c9ee">getDocumentIndex</a>())
            -&gt;setNewObjectID(prototypeID);
  } <span class="keywordflow">else</span> {
    qDebug(<span class="stringliteral">&quot;Node action when there are no canvases created!&quot;</span>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0148d929d5a42d11abc8e383942ae41d"></a><!-- doxytag: member="MainWindow::on_tabWidget_currentChanged" ref="a0148d929d5a42d11abc8e383942ae41d" args="(int newIndex)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_tabWidget_currentChanged </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newIndex</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Slot. Executed whenever the current tab is changed. Disconnects menu and signals from the current document and canvas and connects them to the new canvas and document. Also updates the toolbar. </p>
<div class="fragment"><pre class="fragment">                                                         {
  <span class="keywordflow">if</span> (newIndex &gt; -1 &amp;&amp;
      newIndex &lt; static_cast&lt;int&gt;(tabToCanvasMappings.size())) {
    <span class="comment">// Get the current doc from the current canvas from the current tab</span>
    <span class="comment">// Canvas* currentCanvas = canvases.at(tabToCanvasMappings[newIndex]);</span>
    <a class="code" href="classCanvas.html">Canvas</a>* currentCanvas = <span class="keyword">static_cast&lt;</span><a class="code" href="classCanvas.html">Canvas</a>*<span class="keyword">&gt;</span>(tabWidget-&gt;currentWidget());
    <a class="code" href="classDocument.html">Document</a>* currentDoc = documents.at(currentCanvas-&gt;<a class="code" href="classCanvas.html#ab7d52f6f1fc590fc41aa55219059c9ee">getDocumentIndex</a>());
    <span class="comment">// and update the toolbar with that document&#39;s diagram type.</span>
    <a class="code" href="classMainWindow.html#a0404333cdda871ecfa98bedd3bd3c107">updateDiagramType</a>(currentDoc-&gt;<a class="code" href="classDocument.html#a9f71a25956993e1a3556007e82a9583d">getDiagramType</a>());

    <span class="comment">// disconnect signals that are going to documents</span>
    disconnect(actionSendForwards, SIGNAL(triggered()), 0, 0);
    disconnect(actionSendBackwards, SIGNAL(triggered()), 0, 0);
    disconnect(actionSendToFront, SIGNAL(triggered()), 0, 0);
    disconnect(actionSendToBack, SIGNAL(triggered()), 0, 0);

    <span class="comment">// disconnect signals that are coming from the documents</span>
    disconnect(currentDoc, SIGNAL(modifiedChanged(<span class="keywordtype">bool</span>)),0,0);

    <span class="comment">// connect signals to the current document</span>
    connect(actionSendForwards, SIGNAL(triggered()),
            currentDoc, SLOT(sendSelectedForward()));
    connect(actionSendBackwards, SIGNAL(triggered()),
            currentDoc, SLOT(sendSelectedBackwards()));
    connect(actionSendToFront, SIGNAL(triggered()),
            currentDoc, SLOT(sendSelectedToFront()));
    connect(actionSendToBack, SIGNAL(triggered()),
            currentDoc, SLOT(sendSelectedToBack()));

    <span class="comment">// connect signals from the current document</span>
    connect(currentDoc, SIGNAL(modifiedChanged(<span class="keywordtype">bool</span>)),
            <span class="keyword">this</span>, SLOT(<a class="code" href="classMainWindow.html#a9d3175934c46db440a1821eb0203a227">documentModifiedChanged</a>(<span class="keywordtype">bool</span>)));


  }

  <span class="comment">// Note that when the tab changes, the tool automatically goes to select.</span>
  <span class="comment">// Maybe we should have some functionality to have the chosen tool be saved from</span>
  <span class="comment">// tab to tab?</span>
  actionSelect-&gt;trigger();

}
</pre></div>
</div>
</div>
<a class="anchor" id="a361427603ef01011e0739947ceacafa8"></a><!-- doxytag: member="MainWindow::on_tabWidget_tabCloseRequest" ref="a361427603ef01011e0739947ceacafa8" args="(int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::on_tabWidget_tabCloseRequest </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Slot. Executed whenver a tab is closed. Asks to save if the document is modifed, and closes the tab. </p>
<div class="fragment"><pre class="fragment">                                                      {
  <span class="comment">// Check if the document needs saving</span>
  <span class="keywordflow">if</span> (documents.at(currentDocument)-&gt;getModified() == <span class="keyword">true</span>) {
    QMessageBox::StandardButton choice;
    choice = QMessageBox::question(<span class="keyword">this</span>, <span class="stringliteral">&quot;pUML&quot;</span>, <span class="stringliteral">&quot;This diagram contains unsaved changes, do you want to save first?&quot;</span>,
                          QMessageBox::Yes | QMessageBox::No | QMessageBox::Cancel, QMessageBox::Yes);
    <span class="keywordflow">if</span> (choice == QMessageBox::Yes) {
      <a class="code" href="classMainWindow.html#ad550c61cfa05c7e528dedc6cf636ed10">on_actionSave_triggered</a>();
    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (choice == QMessageBox::Cancel) {
      <span class="keywordflow">return</span>;
    }
  }

  tabWidget-&gt;removeTab(index);
  <span class="keywordflow">if</span>(tabWidget-&gt;count() == 0){
      <a class="code" href="classMainWindow.html#a0404333cdda871ecfa98bedd3bd3c107">updateDiagramType</a>(<a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcda76aa2a7edeab2377d00af42cfdc4334c">BaseNode::Nothing</a>);
  }
}
</pre></div>
</div>
</div>
<a class="anchor" id="af91204ae6780f2ac2992b60f97c152bd"></a><!-- doxytag: member="MainWindow::openDiagram" ref="af91204ae6780f2ac2992b60f97c152bd" args="(const QString &amp;openName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::openDiagram </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&#160;</td>
          <td class="paramname"><em>openName</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This slot opens an existing diagram. It creates a new <a class="el" href="classCanvas.html">Canvas</a>, <a class="el" href="classDocument.html">Document</a> and tab, then recreates the diagram in the <a class="el" href="classDocument.html">Document</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>The filename to open. </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                    {
  <span class="comment">//on_actionOpen_triggered();</span>

  <span class="comment">// This function should be similar to the createNewDiagram function, except</span>
  <span class="comment">// loads in a diagram after creating the document and canvas. This probably</span>
  <span class="comment">// done by calling a slot in the document class with the filename</span>
  <span class="comment">// QMessageBox::information(this, &quot;pUML&quot;,</span>
  <span class="comment">//    &quot;Opening an existing diagram is not yet implemented.\n\n&quot; + filename);</span>

  <span class="comment">// read in the diagram type...</span>
  <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcd">BaseNode::DiagramType</a> diagramType = <a class="code" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcda8de03f85f228905b24b6ced5f8037a69">BaseNode::Class</a>;

  <span class="comment">// Create the tab, canvas, and document</span>
  <a class="code" href="classMainWindow.html#ae66396b9e22dcd5d6e2bd81cbeab9db7">createNewDiagram</a>(diagramType);
  <span class="comment">// Update the tab title</span>
  tabWidget-&gt;setTabText(tabWidget-&gt;currentIndex(), openName);
  documents.at(currentDocument)-&gt;openDocument(openName);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a9f891e359fd184a9b919d8655eefdf1a"></a><!-- doxytag: member="MainWindow::setSelect" ref="a9f891e359fd184a9b919d8655eefdf1a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::setSelect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<div class="fragment"><pre class="fragment">{
    actionSelect-&gt;trigger();
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac0de13008beb3a989509fed14bd7f6e9"></a><!-- doxytag: member="MainWindow::toggle_toolbar" ref="ac0de13008beb3a989509fed14bd7f6e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::toggle_toolbar </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0404333cdda871ecfa98bedd3bd3c107"></a><!-- doxytag: member="MainWindow::updateDiagramType" ref="a0404333cdda871ecfa98bedd3bd3c107" args="(BaseNode::DiagramType type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MainWindow::updateDiagramType </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBaseNode.html#aa551aa648e877b0717bac9fa58570fcd">BaseNode::DiagramType</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This slot refilters the node actions based on a diagram type. This will effectively hide and show menu items and toolbar items. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The new diagram type </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><pre class="fragment">                                                           {
  <span class="comment">// Loop through the actions and set their visibility.</span>
  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; static_cast&lt;int&gt;(actions.size()); ++i) {
    <span class="keywordflow">if</span> (actions.at(i)-&gt;getDiagramType() == type) {
      actions.at(i)-&gt;setVisible(<span class="keyword">true</span>);
    } <span class="keywordflow">else</span> {
      actions.at(i)-&gt;setVisible(<span class="keyword">false</span>);
    }
  }
}
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mainwindow_8h_source.html">mainwindow.h</a></li>
<li><a class="el" href="mainwindow_8cpp.html">mainwindow.cpp</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed May 2 2012 12:44:13 for pUML by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
