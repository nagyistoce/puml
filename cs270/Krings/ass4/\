#include <stdio.h>
#include <stdlib.h>

int linecount(int argc, char *argv[]);
int textfilecheck(int argc, char *argv[]);
int wordcount(int argc, char *argv[]);
int charcount(int argc, char *argv[]);

int main(int argc, char *argv[]) 
{	

	int linenum, wordnum, charnum, n=1, flag_l=0, flag_w=0, flag_c=0;
	char flag;
        if(argc<2)
        {
                exit(0);
        }
	textfilecheck(argc-1, argv);

	if(argv[1][0]=='-')                          /*if there was a flag*/
	{
	 	if(argc<3)                /*if there was no filename given then exit*/
 	        {
             	         printf("\n%s\n", "must supply a filename");
             	         exit(0);
      	        }
		while(argv[1][n]!='\0')              /*grab every flag*/
	        {	
          		flag=argv[1][n];	     
			if(flag=='l')                 /*set flags based on command line flags*/
			{
				flag_l=1;
			}
			if(flag=='w')
			{
				flag_w=1;
			}
			if(flag=='c')
			{
				flag_c=1;
			}
			n++;
	     	}
	}

        if(flag_l==1)           /*line count flag*/
	{
		linenum=linecount(argc, argv);
		printf("\n\nnumber of lines is: %d\n", linenum); 
	}
	if(flag_w==1) 
	{
		wordnum=wordcount(argc, argv);
		printf("\n\nnumber of words is: %d\n", wordnum);
	}
	if(flag_c==1)
	{
		charnum=charcount(argc, argv);
		printf("\n\nnumber of characters is: %d\n", charnum);
	}
}

int linecount(int argc, char *argv[])
{
	FILE *fp;
	char ch;
	int linenum=0;

	fp=fopen(argv[argc-1], "r");
	while(1)
	{
		ch=fgetc(fp);
		if(ch==EOF)
		{
			break;
		}
		else if(ch=='\n')
		{
			linenum++;
		}
	}
	return linenum;
}        

int wordcount(int argc, char *argv[])
{
	FILE *fp;
        char ch;
        int wordcount=0;

        fp=fopen(argv[argc-1], "r");
        while(1)
        {
                ch=fgetc(fp);
                if(ch==EOF)
                {
                        break;
                }
                else if(ch==' ' || ch=='\t' || ch=='\n')
                {
			while(ch==' ' || ch=='\t' || ch=='\n')
			{
				ch=fgetc(fp);
			}
                        wordcount++;
                }
        }
        return wordcount;
}

int textfilecheck(int argc, char *argv[])
{
        FILE *fp;
	char ch;

        fp=fopen(argv[argc], "r");
         while(1)
         {
                ch=fgetc(fp);
                if(ch==EOF)
                {
                     break;
                }
                else if( ((ch < '\0') || (ch > '~')))
                {    
                    printf("\n%s\n\n", "this is not a text file");                  
                    exit(0);
                }
          }
}

int charcount(int argc, char *argc[])
{
}

